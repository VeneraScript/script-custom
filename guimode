local gui = Instance.new("ScreenGui", game.CoreGui)
gui.Name = "ESP_MENU"
gui.ResetOnSpawn = false

local titleBar = Instance.new("TextLabel", gui)
titleBar.Text = "ESP Menu"
titleBar.BackgroundColor3 = Color3.new(0.2, 0.2, 0.2)
titleBar.Size = UDim2.new(0, 200, 0, 30)
titleBar.Position = UDim2.new(0, 100, 0, 100)
titleBar.TextColor3 = Color3.new(1, 1, 1)
titleBar.Font = Enum.Font.SourceSans
titleBar.TextSize = 20
titleBar.BorderSizePixel = 0

local background = Instance.new("Frame", gui)
background.BackgroundColor3 = Color3.new(0.1, 0.1, 0.1)
background.Size = UDim2.new(0, 200, 0, 120)
background.Position = titleBar.Position + UDim2.new(0, 0, 0, 30)
background.BorderSizePixel = 0

local toggle = Instance.new("TextButton", background)
toggle.Text = "Toggle ESP"
toggle.BackgroundColor3 = Color3.new(0.3, 0.3, 0.3)
toggle.Size = UDim2.new(0, 180, 0, 40)
toggle.Position = UDim2.new(0, 10, 0, 10)
toggle.TextColor3 = Color3.new(1, 1, 1)
toggle.Font = Enum.Font.SourceSans
toggle.TextSize = 18
toggle.BorderSizePixel = 0

local status = Instance.new("TextLabel", background)
status.Text = "ESP: Off"
status.BackgroundTransparency = 1
status.Size = UDim2.new(1, 0, 0, 30)
status.Position = UDim2.new(0, 0, 0, 60)
status.TextColor3 = Color3.new(1, 1, 1)
status.Font = Enum.Font.SourceSans
status.TextSize = 18

local esp = loadstring(game:HttpGet("https://raw.githubusercontent.com/VeneraScript/venera-esp/refs/heads/main/myEspScript.lua"))() -- ganti link sesuai kebutuhan

toggle.MouseButton1Click:Connect(function()
    esp:Toggle(not esp.Enabled)
    status.Text = "ESP: " .. (esp.Enabled and "On" or "Off")
end)

-- === Drag Handler ===
local dragging, dragInput, dragStart, startPos

local function update(input)
	local delta = input.Position - dragStart
	gui.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X,
		startPos.Y.Scale, startPos.Y.Offset + delta.Y)
end

titleBar.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 then
		dragging = true
		dragStart = input.Position
		startPos = gui.Position

		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				dragging = false
			end
		end)
	end
end)

titleBar.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement then
		dragInput = input
	end
end)

game:GetService("UserInputService").InputChanged:Connect(function(input)
	if input == dragInput and dragging then
		update(input)
	end
end)
